# 3844. Longest Almost-Palindromic Substring

## Solution 1 (time O(n^2), space O(1))

```python
class Solution:
    def almostPalindromic(self, s: str) -> int:
        n = len(s)
        ans = 0
        for i in range(2 * n - 1):
            left, right = i // 2, (i + 1) // 2
            while left >= 0 and right < n and s[left] == s[right]:
                left -= 1
                right += 1
            new_left, new_right = left - 1, right
            while new_left >= 0 and new_right < n and s[new_left] == s[new_right]:
                new_left -= 1
                new_right += 1
            ans = max(ans, new_right - new_left - 1)
            new_left, new_right = left, right + 1
            while new_left >= 0 and new_right < n and s[new_left] == s[new_right]:
                new_left -= 1
                new_right += 1
            ans = max(ans, new_right - new_left - 1)
            if ans >= n:
                return n
        return ans
```
